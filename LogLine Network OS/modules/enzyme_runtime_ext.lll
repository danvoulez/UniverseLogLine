module enzyme_runtime_ext
version: "1.0.0"

use enzyme_runtime as ez
use timeline_logger as tl

flow optimize_for_workload
  inputs: tenant_id, node_id
  steps:
    - ez.register_enzyme({
        enzyme_id: "latency_pref", version: "1.0.0",
        triggers: ["allocate.candidates"], affinity: ["llm_folding","wasm"],
        params: { prefer_latency_ms: 25 }, enabled: true
      })
    - tl.log_event(tenant_id, "enzyme.optimized", { node_id })
